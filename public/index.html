<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <script>
    // Replace the connectWebSocket function with:
    function connectWebSocket() {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const host = window.location.host;
        socket = new WebSocket(`${protocol}//${host}/ws`);
        
        socket.onopen = () => {
            console.log("WebSocket connected");
            updateRoomList();
        };
        
        socket.onmessage = handleSocketMessage;
        
        socket.onclose = () => {
            console.log("WebSocket disconnected");
            if (currentPage !== 'home') {
                alert("Connection lost. Returning to home page.");
                showHomePage();
            }
        };
    }
    
    // Remove the entire simulateServerResponse function
</script>
</body>
</html>